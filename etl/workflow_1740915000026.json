[ {
  "processDefinition" : {
    "id" : 3,
    "code" : 134535774795872,
    "name" : "SQL变量传递",
    "version" : 31,
    "releaseState" : "ONLINE",
    "projectCode" : 134519748760000,
    "description" : "",
    "globalParams" : "[]",
    "globalParamList" : [ ],
    "globalParamMap" : { },
    "createTime" : "2025-03-01 15:09:25",
    "updateTime" : "2025-03-02 17:15:58",
    "flag" : "YES",
    "userId" : 2,
    "userName" : null,
    "projectName" : null,
    "locations" : "[{\"taskCode\":134535471337568,\"x\":92.20001220703125,\"y\":162},{\"taskCode\":134535581130848,\"x\":540,\"y\":162},{\"taskCode\":134538100089952,\"x\":242.20001220703125,\"y\":55},{\"taskCode\":134549535594496,\"x\":490,\"y\":340}]",
    "scheduleReleaseState" : null,
    "schedule" : null,
    "timeout" : 0,
    "modifyBy" : null,
    "warningGroupId" : null,
    "executionType" : "PARALLEL"
  },
  "processTaskRelationList" : [ {
    "id" : 118,
    "name" : "",
    "processDefinitionVersion" : 31,
    "projectCode" : 134519748760000,
    "processDefinitionCode" : 134535774795872,
    "preTaskCode" : 0,
    "preTaskVersion" : 0,
    "postTaskCode" : 134535471337568,
    "postTaskVersion" : 5,
    "conditionType" : "NONE",
    "conditionParams" : {},
    "createTime" : "2025-03-02 17:15:58",
    "updateTime" : "2025-03-02 17:15:58",
    "operator" : 2,
    "operateTime" : "2025-03-02 17:15:58"
  }, {
    "id" : 119,
    "name" : "",
    "processDefinitionVersion" : 31,
    "projectCode" : 134519748760000,
    "processDefinitionCode" : 134535774795872,
    "preTaskCode" : 134535471337568,
    "preTaskVersion" : 5,
    "postTaskCode" : 134538100089952,
    "postTaskVersion" : 1,
    "conditionType" : "NONE",
    "conditionParams" : {},
    "createTime" : "2025-03-02 17:15:58",
    "updateTime" : "2025-03-02 17:15:58",
    "operator" : 2,
    "operateTime" : "2025-03-02 17:15:58"
  }, {
    "id" : 120,
    "name" : "",
    "processDefinitionVersion" : 31,
    "projectCode" : 134519748760000,
    "processDefinitionCode" : 134535774795872,
    "preTaskCode" : 134538100089952,
    "preTaskVersion" : 1,
    "postTaskCode" : 134535581130848,
    "postTaskVersion" : 22,
    "conditionType" : "NONE",
    "conditionParams" : {},
    "createTime" : "2025-03-02 17:15:58",
    "updateTime" : "2025-03-02 17:15:58",
    "operator" : 2,
    "operateTime" : "2025-03-02 17:15:58"
  }, {
    "id" : 121,
    "name" : "",
    "processDefinitionVersion" : 31,
    "projectCode" : 134519748760000,
    "processDefinitionCode" : 134535774795872,
    "preTaskCode" : 134535581130848,
    "preTaskVersion" : 22,
    "postTaskCode" : 134549535594496,
    "postTaskVersion" : 8,
    "conditionType" : "NONE",
    "conditionParams" : {},
    "createTime" : "2025-03-02 17:15:58",
    "updateTime" : "2025-03-02 17:15:58",
    "operator" : 2,
    "operateTime" : "2025-03-02 17:15:58"
  } ],
  "taskDefinitionList" : [ {
    "id" : 19,
    "code" : 134535471337568,
    "name" : "读取行政区划",
    "version" : 5,
    "description" : "",
    "projectCode" : 134519748760000,
    "userId" : 2,
    "taskType" : "SQL",
    "taskParams" : {"localParams":[{"prop":"areacodes","direct":"OUT","type":"LIST","value":""}],"resourceList":[],"type":"MYSQL","datasource":4,"sql":"SELECT area_code as areacodes\r\nFROM t_area WHERE parent_code='1101';","sqlType":"0","preStatements":[],"postStatements":[],"displayRows":10},
    "taskParamList" : [ {
      "prop" : "areacodes",
      "direct" : "OUT",
      "type" : "LIST",
      "value" : ""
    } ],
    "taskParamMap" : {
      "areacodes" : ""
    },
    "flag" : "YES",
    "isCache" : "NO",
    "taskPriority" : "MEDIUM",
    "userName" : null,
    "projectName" : null,
    "workerGroup" : "default",
    "environmentCode" : -1,
    "failRetryTimes" : 0,
    "failRetryInterval" : 1,
    "timeoutFlag" : "CLOSE",
    "timeoutNotifyStrategy" : null,
    "timeout" : 0,
    "delayTime" : 0,
    "resourceIds" : null,
    "createTime" : "2025-03-01 15:09:25",
    "updateTime" : "2025-03-01 17:45:44",
    "modifyBy" : null,
    "taskGroupId" : 0,
    "taskGroupPriority" : 0,
    "cpuQuota" : -1,
    "memoryMax" : -1,
    "taskExecuteType" : "BATCH",
    "operator" : 2,
    "operateTime" : "2025-03-01 17:45:44"
  }, {
    "id" : 43,
    "code" : 134535581130848,
    "name" : "查询北京市的学生",
    "version" : 22,
    "description" : "",
    "projectCode" : 134519748760000,
    "userId" : 2,
    "taskType" : "SQL",
    "taskParams" : {"localParams":[{"prop":"result_json","direct":"OUT","type":"VARCHAR","value":""}],"resourceList":[],"type":"MYSQL","datasource":5,"sql":"SELECT\r\n\tJSON_ARRAYAGG(\r\n\tJSON_OBJECT( 'id', id, 'name', `name`, 'age', age, 'from', `from`, 'areaCode', area_code, 'userStatus', user_status )) AS result_json \r\nFROM\r\n\tt_user \r\nWHERE\r\n\tarea_code IN (${areacodes});","sqlType":"0","preStatements":[],"postStatements":[],"displayRows":10},
    "taskParamList" : [ {
      "prop" : "result_json",
      "direct" : "OUT",
      "type" : "VARCHAR",
      "value" : ""
    } ],
    "taskParamMap" : {
      "result_json" : ""
    },
    "flag" : "YES",
    "isCache" : "NO",
    "taskPriority" : "MEDIUM",
    "userName" : null,
    "projectName" : null,
    "workerGroup" : "default",
    "environmentCode" : -1,
    "failRetryTimes" : 0,
    "failRetryInterval" : 1,
    "timeoutFlag" : "CLOSE",
    "timeoutNotifyStrategy" : null,
    "timeout" : 0,
    "delayTime" : 0,
    "resourceIds" : null,
    "createTime" : "2025-03-01 15:09:25",
    "updateTime" : "2025-03-02 17:03:31",
    "modifyBy" : null,
    "taskGroupId" : 0,
    "taskGroupPriority" : 0,
    "cpuQuota" : -1,
    "memoryMax" : -1,
    "taskExecuteType" : "BATCH",
    "operator" : 2,
    "operateTime" : "2025-03-02 17:03:31"
  }, {
    "id" : 13,
    "code" : 134538100089952,
    "name" : "测试节点数据",
    "version" : 1,
    "description" : "",
    "projectCode" : 134519748760000,
    "userId" : 2,
    "taskType" : "SHELL",
    "taskParams" : {"localParams":[],"rawScript":"echo '输出变量是'+${areacodes}","resourceList":[]},
    "taskParamList" : [ ],
    "taskParamMap" : null,
    "flag" : "YES",
    "isCache" : "NO",
    "taskPriority" : "MEDIUM",
    "userName" : null,
    "projectName" : null,
    "workerGroup" : "default",
    "environmentCode" : -1,
    "failRetryTimes" : 0,
    "failRetryInterval" : 1,
    "timeoutFlag" : "CLOSE",
    "timeoutNotifyStrategy" : null,
    "timeout" : 0,
    "delayTime" : 0,
    "resourceIds" : null,
    "createTime" : "2025-03-01 15:45:50",
    "updateTime" : "2025-03-01 15:45:50",
    "modifyBy" : null,
    "taskGroupId" : 0,
    "taskGroupPriority" : 0,
    "cpuQuota" : -1,
    "memoryMax" : -1,
    "taskExecuteType" : "BATCH",
    "operator" : 2,
    "operateTime" : "2025-03-01 15:45:50"
  }, {
    "id" : 46,
    "code" : 134549535594496,
    "name" : "Python任务",
    "version" : 8,
    "description" : "",
    "projectCode" : 134519748760000,
    "userId" : 2,
    "taskType" : "PYTHON",
    "taskParams" : {"localParams":[],"rawScript":"import json\r\nimport mysql.connector\r\n# 解析如下数据：[{\"id\": 1, \"age\": \"12\", \"from\": \"北京\", \"name\": \"小米\", \"areaCode\": \"110102\"}, {\"id\": 2, \"age\": \"15\", \"from\": \"天津\", \"name\": \"小刚\", \"areaCode\": \"120101\"}, {\"id\": 3, \"age\": \"13\", \"from\": \"北京\", \"name\": \"小西\", \"areaCode\": \"110103\"}]\r\n\r\n# JSON data\r\ndata = '${result_json}'\r\n\r\n# Parse JSON data\r\nparsed_data = json.loads(data)\r\n\r\n# 对数据进行遍历\r\nfor item in parsed_data:\r\n    item['from'] = item['from'] + \"_python\"\r\n\r\n# MySQL 配置信息\r\nconfig = {\r\n    'user': 'root',\r\n    'password': 'root123',\r\n    'host': '127.0.0.1',\r\n    'database': 'test1'\r\n}\r\n\r\n# 与Mysql建立连接\r\nconn = mysql.connector.connect(**config)\r\ncursor = conn.cursor()\r\n\r\n# 数据存储到Mysql\r\ninsert_query = '''\r\nINSERT INTO t_user (id, age, `from`, name, area_code, user_status)\r\nVALUES (%s, %s, %s, %s, %s, %s)\r\nON DUPLICATE KEY UPDATE\r\nage = VALUES(age),\r\n`from` = VALUES(`from`),\r\nname = VALUES(name),\r\narea_code = VALUES(area_code),\r\nuser_status = VALUES(user_status)\r\n'''\r\nfor item in parsed_data:\r\n    cursor.execute(insert_query, (item['id'], item['age'], item['from'], item['name'], item['areaCode'], item['userStatus']))\r\n\r\n# 事务提交\r\nconn.commit()\r\n\r\n# 关闭连接\r\ncursor.close()\r\nconn.close()\r\n","resourceList":[]},
    "taskParamList" : [ ],
    "taskParamMap" : null,
    "flag" : "YES",
    "isCache" : "NO",
    "taskPriority" : "MEDIUM",
    "userName" : null,
    "projectName" : null,
    "workerGroup" : "default",
    "environmentCode" : -1,
    "failRetryTimes" : 0,
    "failRetryInterval" : 1,
    "timeoutFlag" : "CLOSE",
    "timeoutNotifyStrategy" : null,
    "timeout" : 0,
    "delayTime" : 0,
    "resourceIds" : null,
    "createTime" : "2025-03-01 18:46:43",
    "updateTime" : "2025-03-02 17:15:58",
    "modifyBy" : null,
    "taskGroupId" : 0,
    "taskGroupPriority" : 0,
    "cpuQuota" : -1,
    "memoryMax" : -1,
    "taskExecuteType" : "BATCH",
    "operator" : 2,
    "operateTime" : "2025-03-02 17:15:58"
  } ],
  "schedule" : {
    "id" : 1,
    "processDefinitionCode" : 134535774795872,
    "processDefinitionName" : null,
    "projectName" : null,
    "definitionDescription" : null,
    "startTime" : "2025-03-02 00:00:00",
    "endTime" : "2125-03-02 00:00:00",
    "timezoneId" : "Asia/Hong_Kong",
    "crontab" : "0/15 * * * * ? *",
    "failureStrategy" : "CONTINUE",
    "warningType" : "NONE",
    "createTime" : "2025-03-02 17:14:51",
    "updateTime" : "2025-03-02 17:31:38",
    "userId" : 2,
    "userName" : null,
    "releaseState" : "OFFLINE",
    "warningGroupId" : 0,
    "processInstancePriority" : "MEDIUM",
    "workerGroup" : "default",
    "tenantCode" : "default",
    "environmentCode" : -1,
    "environmentName" : null
  }
} ]